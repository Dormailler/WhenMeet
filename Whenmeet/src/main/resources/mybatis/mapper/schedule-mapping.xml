<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="schedule.scheduleMapper">
	
	<select id="selectUser" resultType = "dto.UserDTO">
		<![CDATA[
			select * from user_table
		]]>
	</select>
	<select id="selectUserOne" resultType = "dto.UserDTO" parameterType = "String">
		<![CDATA[
			select * from user_table
			where user_id = #{user_id}
		]]>
	</select>
	
	<select id = "selectGroup" resultType = "dto.GroupDTO">
		<![CDATA[
			select * from group_table
		]]>
	</select>	
	<select id = "selectGroupOne" resultType = "dto.GroupDTO" parameterType = "String">
		<![CDATA[
			select * from group_table
			where group_id = #{group_id}
		]]>
	</select>
	
	<select id = "selectGroupUser" resultType = "dto.GroupUserDTO">
		<![CDATA[
			select * from group_user_table
		]]>
	</select>
	<select id = "selectGroupUserOne" resultType = "dto.GroupUserDTO" parameterType = "hashmap">
		<![CDATA[
			select * from group_user_table
			where group_id = #{group_id} and user_id = #{user_id}
		]]>
	</select>
	<select id = "selectGroupUsers" resultType = "dto.GroupUserDTO" parameterType = "String">
		<![CDATA[
			select * from group_user_table
			where group_id = #{group_id}
		]]>
	</select>
	
	<update id = "updateGroupUserSubHost" parameterType = "hashMap">
		<![CDATA[
			update group_user_table
			set sub_host = #{sub_host}
			where group_id = #{group_id} and user_id = #{user_id}
		]]>
	</update>
	
	<select id="getLocation" resultType="String" parameterType="String">
		select final_location from group_table where group_id = #{group_id};
	</select>
	<insert id="addChat" parameterType = "hashMap">
		insert into chat_table values(#{group_id},#{name},#{text},#{now},#{profile_url});
	</insert>
	<select id="getChat" resultType="chatdto" parameterType="String">
		select * from chat_table where group_id = #{group_id};
	</select>
</mapper>